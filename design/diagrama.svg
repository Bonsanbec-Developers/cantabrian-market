<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.0.2 (20251019.1705)
 -->
<!-- Title: CantabrianMarket Pages: 1 -->
<svg width="1363pt" height="423pt"
 viewBox="0.00 0.00 1363.00 423.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 419.37)">
<title>CantabrianMarket</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-419.37 1359.25,-419.37 1359.25,4 -4,4"/>
<text xml:space="preserve" text-anchor="middle" x="677.62" y="-400.92" font-family="Consolas" font-size="11.00">Flujo de Datos &#45; Cantabrian Market</text>
<g id="clust1" class="cluster">
<title>cluster_client</title>
<path fill="none" stroke="#cccccc" d="M20,-151.37C20,-151.37 347.75,-151.37 347.75,-151.37 353.75,-151.37 359.75,-157.37 359.75,-163.37 359.75,-163.37 359.75,-211.37 359.75,-211.37 359.75,-217.37 353.75,-223.37 347.75,-223.37 347.75,-223.37 20,-223.37 20,-223.37 14,-223.37 8,-217.37 8,-211.37 8,-211.37 8,-163.37 8,-163.37 8,-157.37 14,-151.37 20,-151.37"/>
<text xml:space="preserve" text-anchor="middle" x="183.88" y="-208.92" font-family="Consolas" font-size="11.00">Frontend (Cliente Web &#45; SvelteKit en Vercel)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_supabase</title>
<path fill="none" stroke="#cccccc" d="M491.5,-207.37C491.5,-207.37 1269.5,-207.37 1269.5,-207.37 1275.5,-207.37 1281.5,-213.37 1281.5,-219.37 1281.5,-219.37 1281.5,-375.37 1281.5,-375.37 1281.5,-381.37 1275.5,-387.37 1269.5,-387.37 1269.5,-387.37 491.5,-387.37 491.5,-387.37 485.5,-387.37 479.5,-381.37 479.5,-375.37 479.5,-375.37 479.5,-219.37 479.5,-219.37 479.5,-213.37 485.5,-207.37 491.5,-207.37"/>
<text xml:space="preserve" text-anchor="middle" x="880.5" y="-372.92" font-family="Consolas" font-size="11.00">Backend as a Service (Supabase)</text>
</g>
<!-- SvelteKit -->
<g id="node1" class="node">
<title>SvelteKit</title>
<polygon fill="#f9f9f9" stroke="#555555" points="351.75,-195.37 208.25,-195.37 208.25,-159.37 351.75,-159.37 351.75,-195.37"/>
<text xml:space="preserve" text-anchor="middle" x="280" y="-179.12" font-family="Consolas" font-size="10.00">SvelteKit</text>
<text xml:space="preserve" text-anchor="middle" x="280" y="-167.87" font-family="Consolas" font-size="10.00">(Tailwind + Stores + Routing)</text>
</g>
<!-- Auth -->
<g id="node3" class="node">
<title>Auth</title>
<polygon fill="#f9f9f9" stroke="#555555" points="919.25,-336.37 820.75,-336.37 820.75,-300.37 919.25,-300.37 919.25,-336.37"/>
<text xml:space="preserve" text-anchor="middle" x="870" y="-320.12" font-family="Consolas" font-size="10.00">Auth</text>
<text xml:space="preserve" text-anchor="middle" x="870" y="-308.87" font-family="Consolas" font-size="10.00">Correo/Contrase침a</text>
</g>
<!-- SvelteKit&#45;&gt;Auth -->
<g id="edge2" class="edge">
<title>SvelteKit&#45;&gt;Auth</title>
<path fill="none" stroke="#333333" d="M351.9,-171.26C441.44,-164.89 589.4,-159.29 635.5,-186.87 649.34,-195.15 641.63,-207.46 653.5,-218.37 698.21,-259.44 762.75,-286.35 809.54,-301.79"/>
<polygon fill="#333333" stroke="#333333" points="808.4,-305.1 818.99,-304.83 810.54,-298.44 808.4,-305.1"/>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-197.82" font-family="Consolas" font-size="9.00">SignUp / Login / Logout</text>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-188.07" font-family="Consolas" font-size="9.00">(supabase.auth.*)</text>
</g>
<!-- Storage -->
<g id="node5" class="node">
<title>Storage</title>
<polygon fill="#f9f9f9" stroke="#555555" points="613,-359.37 510,-359.37 510,-323.37 613,-323.37 613,-359.37"/>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-343.12" font-family="Consolas" font-size="10.00">Storage</text>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-331.87" font-family="Consolas" font-size="10.00">(Bucket &#39;productos&#39;)</text>
</g>
<!-- SvelteKit&#45;&gt;Storage -->
<g id="edge7" class="edge">
<title>SvelteKit&#45;&gt;Storage</title>
<path fill="none" stroke="#333333" d="M289.97,-195.77C303.55,-221.64 331.84,-268.42 369.75,-293.37 408.17,-318.66 458.97,-330.63 498.49,-336.29"/>
<polygon fill="#333333" stroke="#333333" points="497.96,-339.75 508.34,-337.59 498.88,-332.81 497.96,-339.75"/>
<text xml:space="preserve" text-anchor="middle" x="419.62" y="-341.98" font-family="Consolas" font-size="9.00">Upload imagen</text>
<text xml:space="preserve" text-anchor="middle" x="419.62" y="-332.23" font-family="Consolas" font-size="9.00">al folder {uid}/</text>
</g>
<!-- RPC_Pagar -->
<g id="node6" class="node">
<title>RPC_Pagar</title>
<polygon fill="#f9f9f9" stroke="#555555" points="635.5,-251.37 487.5,-251.37 487.5,-215.37 635.5,-215.37 635.5,-251.37"/>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-235.12" font-family="Consolas" font-size="10.00">RPC: pagar()</text>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-223.87" font-family="Consolas" font-size="10.00">Simula pago y genera 칩rdenes</text>
</g>
<!-- SvelteKit&#45;&gt;RPC_Pagar -->
<g id="edge5" class="edge">
<title>SvelteKit&#45;&gt;RPC_Pagar</title>
<path fill="none" stroke="#333333" d="M351.89,-191.57C389.65,-199.14 436.36,-208.5 476,-216.44"/>
<polygon fill="#333333" stroke="#333333" points="475.27,-219.86 485.76,-218.4 476.65,-213 475.27,-219.86"/>
<text xml:space="preserve" text-anchor="middle" x="419.62" y="-224.61" font-family="Consolas" font-size="9.00">RPC call</text>
<text xml:space="preserve" text-anchor="middle" x="419.62" y="-214.86" font-family="Consolas" font-size="9.00">Validar y procesar pago</text>
</g>
<!-- RPC_Publicar -->
<g id="node7" class="node">
<title>RPC_Publicar</title>
<polygon fill="#f9f9f9" stroke="#555555" points="624.62,-305.37 498.38,-305.37 498.38,-269.37 624.62,-269.37 624.62,-305.37"/>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-289.12" font-family="Consolas" font-size="10.00">RPC: publicar_producto()</text>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-277.87" font-family="Consolas" font-size="10.00">Inserta nuevos productos</text>
</g>
<!-- SvelteKit&#45;&gt;RPC_Publicar -->
<g id="edge8" class="edge">
<title>SvelteKit&#45;&gt;RPC_Publicar</title>
<path fill="none" stroke="#333333" d="M303.45,-195.7C320.67,-208.96 345.52,-226.39 369.75,-237.37 406.91,-254.21 450.81,-266.2 487.12,-274.22"/>
<polygon fill="#333333" stroke="#333333" points="486.14,-277.59 496.65,-276.26 487.61,-270.74 486.14,-277.59"/>
<text xml:space="preserve" text-anchor="middle" x="419.62" y="-280.34" font-family="Consolas" font-size="9.00">RPC call</text>
<text xml:space="preserve" text-anchor="middle" x="419.62" y="-270.59" font-family="Consolas" font-size="9.00">Publicar nuevo producto</text>
</g>
<!-- Productos -->
<g id="node8" class="node">
<title>Productos</title>
<polygon fill="#f9f9f9" stroke="#555555" points="1355.25,-169.37 1078.25,-169.37 1078.25,-133.37 1355.25,-133.37 1355.25,-169.37"/>
<text xml:space="preserve" text-anchor="middle" x="1216.75" y="-153.12" font-family="Consolas" font-size="10.00">productos</text>
<text xml:space="preserve" text-anchor="middle" x="1216.75" y="-141.87" font-family="Consolas" font-size="10.00">(id, nombre, descripcion, precio, imagen, visible, publicador)</text>
</g>
<!-- SvelteKit&#45;&gt;Productos -->
<g id="edge3" class="edge">
<title>SvelteKit&#45;&gt;Productos</title>
<path fill="none" stroke="#333333" d="M311.11,-159.04C327.79,-149.77 349.26,-139.27 369.75,-133.37 624.66,-60.02 702.57,-97.88 966.5,-124.37 998.99,-127.63 1033.84,-131.3 1066.88,-134.86"/>
<polygon fill="#333333" stroke="#333333" points="1066.19,-138.3 1076.51,-135.89 1066.94,-131.34 1066.19,-138.3"/>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-109.74" font-family="Consolas" font-size="9.00">SELECT *</text>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-99.99" font-family="Consolas" font-size="9.00">Cargar cat치logo</text>
</g>
<!-- Carritos -->
<g id="node9" class="node">
<title>Carritos</title>
<polygon fill="#f9f9f9" stroke="#555555" points="952.62,-169.37 787.38,-169.37 787.38,-133.37 952.62,-133.37 952.62,-169.37"/>
<text xml:space="preserve" text-anchor="middle" x="870" y="-153.12" font-family="Consolas" font-size="10.00">carritos</text>
<text xml:space="preserve" text-anchor="middle" x="870" y="-141.87" font-family="Consolas" font-size="10.00">(id_usuario, producto_id, cantidad)</text>
</g>
<!-- SvelteKit&#45;&gt;Carritos -->
<g id="edge4" class="edge">
<title>SvelteKit&#45;&gt;Carritos</title>
<path fill="none" stroke="#333333" d="M351.65,-158.95C389.31,-150.06 436.61,-140.37 479.5,-135.87 601.5,-123.08 633.13,-126.79 755.5,-135.37 762.05,-135.83 768.8,-136.44 775.58,-137.14"/>
<polygon fill="#333333" stroke="#333333" points="775.17,-140.62 785.5,-138.26 775.95,-133.66 775.17,-140.62"/>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-146.82" font-family="Consolas" font-size="9.00">INSERT / UPDATE / DELETE</text>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-137.07" font-family="Consolas" font-size="9.00">Agregar / quitar del carrito</text>
</g>
<!-- Ordenes -->
<g id="node10" class="node">
<title>Ordenes</title>
<polygon fill="#f9f9f9" stroke="#555555" points="966.5,-47.37 773.5,-47.37 773.5,-11.37 966.5,-11.37 966.5,-47.37"/>
<text xml:space="preserve" text-anchor="middle" x="870" y="-31.12" font-family="Consolas" font-size="10.00">ordenes</text>
<text xml:space="preserve" text-anchor="middle" x="870" y="-19.87" font-family="Consolas" font-size="10.00">(id, user_id, producto_id, cantidad, pago)</text>
</g>
<!-- SvelteKit&#45;&gt;Ordenes -->
<g id="edge6" class="edge">
<title>SvelteKit&#45;&gt;Ordenes</title>
<path fill="none" stroke="#333333" d="M289.51,-159.04C302.72,-132.81 330.76,-85.1 369.75,-61.37 489.41,11.47 656.47,5.23 763.7,-9.36"/>
<polygon fill="#333333" stroke="#333333" points="762.97,-12.79 773.36,-10.73 763.95,-5.86 762.97,-12.79"/>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-27.96" font-family="Consolas" font-size="9.00">SELECT</text>
<text xml:space="preserve" text-anchor="middle" x="561.5" y="-18.21" font-family="Consolas" font-size="9.00">Consultar pedidos</text>
</g>
<!-- User -->
<g id="node2" class="node">
<title>User</title>
<polygon fill="#f9f9f9" stroke="#555555" points="116,-195.37 16,-195.37 16,-159.37 116,-159.37 116,-195.37"/>
<text xml:space="preserve" text-anchor="middle" x="66" y="-179.12" font-family="Consolas" font-size="10.00">Usuario Navegador</text>
<text xml:space="preserve" text-anchor="middle" x="66" y="-167.87" font-family="Consolas" font-size="10.00">(HTTP + TLS)</text>
</g>
<!-- User&#45;&gt;SvelteKit -->
<g id="edge1" class="edge">
<title>User&#45;&gt;SvelteKit</title>
<path fill="none" stroke="#333333" d="M116.44,-177.37C140.2,-177.37 169.34,-177.37 196.34,-177.37"/>
<polygon fill="#333333" stroke="#333333" points="196.25,-180.87 206.25,-177.37 196.25,-173.87 196.25,-180.87"/>
<text xml:space="preserve" text-anchor="middle" x="162.12" y="-178.57" font-family="Consolas" font-size="9.00">Interacci칩n UI</text>
</g>
<!-- DB -->
<g id="node4" class="node">
<title>DB</title>
<polygon fill="#f9f9f9" stroke="#555555" points="1273.5,-341.37 1160,-341.37 1160,-305.37 1273.5,-305.37 1273.5,-341.37"/>
<text xml:space="preserve" text-anchor="middle" x="1216.75" y="-319.49" font-family="Consolas" font-size="10.00">PostgreSQL Database</text>
</g>
<!-- Auth&#45;&gt;DB -->
<g id="edge15" class="edge">
<title>Auth&#45;&gt;DB</title>
<path fill="none" stroke="#333333" d="M919.66,-319.08C979.41,-319.94 1081.05,-321.42 1148.3,-322.39"/>
<polygon fill="#333333" stroke="#333333" points="1148.05,-325.89 1158.1,-322.53 1148.15,-318.89 1148.05,-325.89"/>
<text xml:space="preserve" text-anchor="middle" x="1022.38" y="-331.97" font-family="Consolas" font-size="9.00">auth.uid() contexto</text>
<text xml:space="preserve" text-anchor="middle" x="1022.38" y="-322.22" font-family="Consolas" font-size="9.00">RLS policies</text>
</g>
<!-- Storage&#45;&gt;Auth -->
<g id="edge16" class="edge">
<title>Storage&#45;&gt;Auth</title>
<path fill="none" stroke="#333333" d="M613.46,-337.55C667.28,-333.51 752.1,-327.14 809.09,-322.87"/>
<polygon fill="#333333" stroke="#333333" points="809.23,-326.36 818.94,-322.13 808.71,-319.38 809.23,-326.36"/>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-344.88" font-family="Consolas" font-size="9.00">RLS policy</text>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-335.13" font-family="Consolas" font-size="9.00">upload_own_folder_only</text>
</g>
<!-- RPC_Pagar&#45;&gt;Carritos -->
<g id="edge10" class="edge">
<title>RPC_Pagar&#45;&gt;Carritos</title>
<path fill="none" stroke="#333333" d="M631.28,-214.97C678.05,-202.46 740.07,-185.86 789.04,-172.76"/>
<polygon fill="#333333" stroke="#333333" points="789.7,-176.21 798.45,-170.24 787.89,-169.45 789.7,-176.21"/>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-217.8" font-family="Consolas" font-size="9.00">DELETE</text>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-208.05" font-family="Consolas" font-size="9.00">Vaciar carrito</text>
</g>
<!-- RPC_Pagar&#45;&gt;Ordenes -->
<g id="edge9" class="edge">
<title>RPC_Pagar&#45;&gt;Ordenes</title>
<path fill="none" stroke="#333333" d="M617.32,-214.97C623.97,-211.18 630.25,-206.69 635.5,-201.37 649.91,-186.77 639.95,-174.27 653.5,-158.87 688.17,-119.47 710.49,-126.37 755.5,-99.37 780.46,-84.39 808.29,-67.24 830.14,-53.66"/>
<polygon fill="#333333" stroke="#333333" points="831.8,-56.75 838.44,-48.5 828.1,-50.81 831.8,-56.75"/>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-169.82" font-family="Consolas" font-size="9.00">INSERT</text>
<text xml:space="preserve" text-anchor="middle" x="704.5" y="-160.07" font-family="Consolas" font-size="9.00">Registrar ordenes</text>
</g>
<!-- RPC_Publicar&#45;&gt;Productos -->
<g id="edge11" class="edge">
<title>RPC_Publicar&#45;&gt;Productos</title>
<path fill="none" stroke="#333333" d="M624.84,-274.39C738.22,-250.79 979.04,-200.65 1115.66,-172.21"/>
<polygon fill="#333333" stroke="#333333" points="1116.37,-175.63 1125.45,-170.17 1114.94,-168.78 1116.37,-175.63"/>
<text xml:space="preserve" text-anchor="middle" x="870" y="-252.61" font-family="Consolas" font-size="9.00">INSERT</text>
<text xml:space="preserve" text-anchor="middle" x="870" y="-242.86" font-family="Consolas" font-size="9.00">Crear nuevo producto</text>
</g>
<!-- Productos&#45;&gt;Auth -->
<g id="edge14" class="edge">
<title>Productos&#45;&gt;Auth</title>
<path fill="none" stroke="#333333" d="M1130.01,-169.78C1110.83,-177.42 1092.1,-188.19 1078.25,-203.37 1058.04,-225.51 1081.57,-247.3 1060.25,-268.37 1041.96,-286.45 979.13,-300.63 930.83,-309.2"/>
<polygon fill="#333333" stroke="#333333" points="930.28,-305.74 921.02,-310.89 931.47,-312.64 930.28,-305.74"/>
<text xml:space="preserve" text-anchor="middle" x="1022.38" y="-299.14" font-family="Consolas" font-size="9.00">publicador FK</text>
</g>
<!-- Carritos&#45;&gt;Productos -->
<g id="edge12" class="edge">
<title>Carritos&#45;&gt;Productos</title>
<path fill="none" stroke="#333333" d="M952.7,-151.37C986.77,-151.37 1027.45,-151.37 1066.51,-151.37"/>
<polygon fill="#333333" stroke="#333333" points="1066.51,-154.87 1076.51,-151.37 1066.51,-147.87 1066.51,-154.87"/>
<text xml:space="preserve" text-anchor="middle" x="1022.38" y="-152.57" font-family="Consolas" font-size="9.00">producto_id FK</text>
</g>
<!-- Ordenes&#45;&gt;Productos -->
<g id="edge13" class="edge">
<title>Ordenes&#45;&gt;Productos</title>
<path fill="none" stroke="#333333" d="M966.78,-32.18C997.32,-35.3 1030.82,-41.09 1060.25,-51.62 1107.87,-68.66 1155.82,-102.56 1185.63,-126.08"/>
<polygon fill="#333333" stroke="#333333" points="1183.11,-128.54 1193.1,-132.06 1187.49,-123.08 1183.11,-128.54"/>
<text xml:space="preserve" text-anchor="middle" x="1022.38" y="-52.82" font-family="Consolas" font-size="9.00">producto_id FK</text>
</g>
</g>
</svg>
